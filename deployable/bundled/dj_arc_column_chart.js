!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["./dj_arc_column_chart"]=t():e["./dj_arc_column_chart"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=474)}({474:function(e,t){looker.plugins.visualizations.add({id:"dj_arc_column_chart",label:"Demandjump column chart",options:{chooseTheme:{label:"Choose a theme",order:1,section:"Format",type:"string",display:"select",values:[{Horizontal:"Horizontal"},{Vertical:"Vertical"},{Custom:"Custom"}],default:"Horizontal",hidden:!1},title:{label:"Title of chart",order:4,section:"Format",type:"string",placeholder:"Enter chart title here",hidden:!1},showTitle:{label:"Show title",order:5,section:"Format",type:"boolean",default:!1,hidden:!1},yTitle:{label:"Y axis Label",order:3,section:"Format",type:"string",placeholder:"Enter y axis label",hidden:!1},xTitle:{label:"X axis label",order:2,section:"Format",type:"string",placeholder:"Enter x axis label",hidden:!1},customSpacing:{order:8,section:"Format",type:"sentence_maker",words:[{type:"separator",text:" "}],hidden:!1},customLabel:{order:9,section:"Format",type:"sentence_maker",words:[{type:"separator",text:"Custom configuration:"}],hidden:!1},dataLabels:{label:"Enable data labels",order:10,section:"Format",type:"boolean",default:!1,hidden:!1},horizontal:{label:"Plot graph horizontally",order:11,section:"Format",type:"boolean",default:!0,hidden:!1},endingShape:{label:"Ending bar shape",order:12,section:"Format",type:"string",display:"select",values:[{Rounded:"rounded"},{Flat:"flat"}],default:"rounded",hidden:!1},doNotTruncate:{label:"Don't Truncate data",order:14,section:"Format",type:"boolean",default:!1,hidden:!1}},create:function(e,t){this._custom="something",e.innerHTML='\n            <style>\n            @import url(\'https://fonts.googleapis.com/css?family=Roboto:300,400,500&display=swap\');\n            * { font-family: \'Roboto\' !important; }\n            </style>\n            <div class="row">\n                <div class="col-md-6">\n                    <div class="main-card mb-3 card">\n                        <div class="card-body">\n                            <div id="chart-apex-column"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            ',this._container=d3.select(e).append("div").attr("class","container").style("position","absolute").style("top","0").style("left","0")},updateAsync:function(e,t,i,n,a,o){d3.select("#chart-apex-column").selectAll("*").remove();var l=e,s=!1,r=!1,d=!1;0!=n.fields.pivots.length&&(s=!0,0==n.fields.dimension_like.length?(r=!0,n.fields._dimension_like=n.fields.dimension_like,n.fields.dimension_like=n.fields.pivots):d=!0);var c=!0;!function(){if(s){if(r&&(n.fields.measure_like.forEach(function(e){for(var t=0;t<n.pivots.length;t++){if(!l[0][e.name][n.pivots[t].key].rendered)return void(c=!1);if(!l[0][e.name][n.pivots[t].key].rendered.includes("%"))return void(c=!1)}}),c&&n.fields.measure_like.forEach(function(e){for(var t=0;t<n.pivots.length;t++){var i=l[0][e.name][n.pivots[t].key].value,a=100*i,o=a.toFixed(1);l[0][e.name][n.pivots[t].key].original=i,l[0][e.name][n.pivots[t].key].value=o}})),d){for(var e=function(e){n.fields.measure_like.forEach(function(t){l[0][t.name][n.pivots[e].key].rendered&&l[0][t.name][n.pivots[e].key].rendered.includes("%")||(c=!1)})},t=0;t<n.pivots.length;t++)e(t);c&&l.forEach(function(e){for(var t=0;t<n.pivots.length;t++)for(var i=0;i<n.fields.measure_like.length;i++){var a=e[n.fields.measure_like[i].name][n.pivots[t].key].value,o=100*a,l=o.toFixed(1);e[n.fields.measure_like[i].name][n.pivots[t].key].original=a,e[n.fields.measure_like[i].name][n.pibots[t].key].value=l}})}}else{for(var i=0;i<n.fields.measure_like.length;i++){if(!l[0][n.fields.measure_like[i].name].rendered)return void(c=!1);if(!l[0][n.fields.measure_like[i].name].rendered.includes("%"))return void(c=!1)}c&&l.forEach(function(e){for(var t=0;t<n.fields.measure_like.length;t++){var i=e[n.fields.measure_like[t].name].value,a=100*i,o=a.toFixed(1);e[n.fields.measure_like[t].name].original=i,e[n.fields.measure_like[t].name].value=o}})}}();var u="Horizontal";i.chooseTheme&&(u=i.chooseTheme);var m=!1,h=!1,f=!1,p="rounded",v=" ";i.showTitle||(i.showTitle=!1);var k=" ",y=" ",g=!1;if("Horizontal"!=u&&"Vertical"!=u||("horizontalOrVertical"!=this._custom&&(this._custom="horizontalOrVertical",this.options.customSpacing.hidden=!0,this.options.customLabel.hidden=!0,this.options.dataLabels.hidden=!0,this.options.horizontal.hidden=!0,this.options.endingShape.hidden=!0,this.options.doNotTruncate.hidden=!0,m=!0),"Horizontal"==u&&(f=!0),"Vertical"==u&&(f=!1)),"Custom"==u&&("Custom"!=this._custom&&(this._custom="Custom",this.options.customSpacing.hidden=!1,this.options.customLabel.hidden=!1,this.options.dataLabels.hidden=!1,this.options.horizontal.hidden=!1,this.options.endingShape.hidden=!1,this.options.doNotTruncate.hidden=!1,m=!0),i.dataLabels&&(h=i.dataLabels),i.endingShape&&(p=i.endingShape),i.horizontal&&(f=i.horizontal),i.doNotTruncate&&(g=i.doNotTruncate)),m&&this.trigger("registerOptions",this.options),""!=i.title&&(v=i.title),""!=i.yTitle&&(k=i.yTitle),""!=i.xTitle&&(y=i.xTitle),!g)for(var _=function(e){var t=!1;l.forEach(function(i){i[n.fields.measure_like[e].name].value>100&&(t=!0)}),t&&l.forEach(function(t){t[n.fields.measure_like[e].name].original=t[n.fields.measure_like[e].name].value,t[n.fields.measure_like[e].name].value=Math.trunc(t[n.fields.measure_like[e].name].value)})},b=0;b<n.fields.measure_like.length;b++)_(b);var x=[],F=[];if(s){if(r&&(n.pivots.forEach(function(e){var t=void 0;e.metadata[n.fields.pivots[0].name].links&&(t=e.metadata[n.fields.pivots[0].name].links),e.metadata[n.fields.pivots[0].name].rendered?null!=e.metadata[n.fields.pivots[0].name].rendered&&x.push({name:e.metadata[n.fields.pivots[0].name].rendered,links:t}):x.push({name:e.key,links:t})}),n.fields.measure_like.forEach(function(e,t){for(var i=[],a=[],o=0;o<n.pivots.length;o++){var s=n.pivots[o].key,r=0;a.push(l[0][e.name][s].links),null!=l[0][e.name][s].value&&(r=l[0][e.name][s].value),i.push(r)}var d=e.label;e.label_short&&(d=e.label_short);var c={name:d,className:d.replace(/ /g,"-"),data:i,links:a};F.push(c)})),d){l.forEach(function(e){var t=e[n.fields.dimension_like[0].name].links;e[n.fields.dimension_like[0].name].rendered?x.push({name:e[n.fields.dimension_like[0].name].rendered,links:t}):x.push({name:e[n.fields.dimension_like[0].name].value,links:t})});for(var E=0;E<n.pivots.length;E++){var C=n.pivots[E].data[n.fields.pivots[0].name],w={name:C,className:C.replace(/ /g,"-"),data:[],links:[]};F.push(w)}l.forEach(function(e){for(var t=0;t<n.pivots.length;t++)F[t].links.push(e[n.fields.measure_like[0].name][n.pivots[t].key].links)}),l.forEach(function(e){for(var t=0;t<n.pivots.length;t++){var i=0;null!=e[n.fields.measure_like[0].name][n.pivots[t].key].value&&(i=e[n.fields.measure_like[0].name][n.pivots[t].key].value),F[t].data.push(i)}})}}else{for(b=0;b<n.fields.measure_like.length;b++){var A=n.fields.measure_like[b].label;n.fields.measure_like[b].label_short&&(A=n.fields.measure_like[b].label_short);var T={name:A,className:A.replace(/ /g,"-"),data:[],links:[]};F.push(T)}l.forEach(function(e){var t=e[n.fields.dimension_like[0].name].value,i=e[n.fields.dimension_like[0].name].links;x.push({name:t,links:i})}),l.forEach(function(e,t){for(var i=0;i<n.fields.measure_like.length;i++){var a=0,o=e[n.fields.measure_like[i].name].links;null!=e[n.fields.measure_like[i].name].value&&(a=e[n.fields.measure_like[i].name].value),F[i].data.push(a),F[i].links.push(o)}})}var z=[];x.forEach(function(e){return z.push(e.name)});var D=window.innerHeight-45,L="55";i.columnWidth&&(L=i.columnWidth),L.toString();var S={chart:{height:D,type:"bar"},colors:["#009DE9","#3EC173","#38E883","#4A4AFF","#163796","#5CF3FF","#F9BE3D","#E2FF6E","#ACEA49","#A53057","#AC7EB7","#5C3BC3","#5278CE","#A1EDFF","#05CE5A","#4A8C04","#3ABBCF","#ECE428","#E53057","#FF8571","#F9DCA0","#8FFFC7","#DFA1FF","#9C5CF7","#0D6D6D","#35A8DB","#92FFFF","#A5C0FF","#FFB0B0","#931655"],plotOptions:{bar:{horizontal:f,endingShape:p,columnWidth:L+="%"}},dataLabels:{enabled:h,style:{fontSize:"12px",colors:["#fff"]}},stroke:{show:!0,width:2,colors:["transparent"]},series:F,xaxis:{categories:z,title:{text:y},labels:{formatter:function(e){return c&&f?e+"%":e}}},yaxis:{title:{text:k},labels:{formatter:function(e){return c&&!f?e+"%":e}}},fill:{opacity:1},tooltip:{y:{formatter:function(e){return c?e+"%":e}}},legend:{position:"bottom",horizontalAlign:"center"}};1==i.showTitle&&(S.title={text:v}),window.Apex={dataLabels:{enabled:!1},stroke:{width:2}};var B=new ApexCharts(document.querySelector("#chart-apex-column"),S);document.getElementById("chart-apex-column")&&B.render(),d3.select(".container").selectAll("*").remove();var N=document.getElementsByClassName("apexcharts-xaxis-texts-g");f&&(N=document.getElementsByClassName("apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g"));var j,H=N[0].children,O=[];x.forEach(function(e,t){null==e.links&&(e.links=[]);for(var i=0;i<F.length;i++)if(void 0!==F[i].links[t])for(var n=0;n<F[i].links[t].length;n++)F[i].links[t][n].type_label||(F[i].links[t][n].type_label="Drill into ".concat(F[i].name)),e.links.push(F[i].links[t][n])});for(var V=0;V<x.length;V++){var M=(j=H[V].getBoundingClientRect()).width,R=j.height,P={index:V,id:"_".concat(H[V].id),originalId:H[V].id,coordinates:{x:j.x,y:j.y,width:M,height:R,top:j.top,left:j.left,bottom:j.bottom,right:j.right},xaxis:x[V].name,links:x[V].links,element:H[V]};O.push(P)}var W=d3.select(".container").append("div").attr("class","dimensions").selectAll(".dimension").data(O),I=W.enter().append("span");W.merge(I).attr("class","dimension").attr("id",function(e){return e.id}).style("width",function(e){return"".concat(e.coordinates.width,"px")}).style("height",function(e){return"".concat(e.coordinates.height,"px")}).style("position","absolute").style("top",function(e){return"".concat(e.coordinates.top,"px")}).style("left",function(e){return"".concat(e.coordinates.left,"px")}).style("background-color","transparent").style("opacity","0").style("z-index","4").on("click",function(e){return t=e.links,i=d3.event,void LookerCharts.Utils.openDrillMenu({links:t,event:i});var t,i}),o()}})}})});
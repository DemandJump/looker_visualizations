!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["./dj_arc_column_chart"]=t():e["./dj_arc_column_chart"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=474)}({474:function(e,t){looker.plugins.visualizations.add({id:"dj_arc_column_chart",label:"Demandjump column chart",options:{chooseTheme:{label:"Choose a theme",order:1,section:"Format",type:"string",display:"select",values:[{Horizontal:"Horizontal"},{Vertical:"Vertical"},{Custom:"Custom"}],default:"Horizontal",hidden:!1},title:{label:"Title of chart",order:4,section:"Format",type:"string",placeholder:"Enter chart title here",hidden:!1},showTitle:{label:"Show title",order:5,section:"Format",type:"boolean",default:!1,hidden:!1},yTitle:{label:"Y axis Label",order:3,section:"Format",type:"string",placeholder:"Enter y axis label",hidden:!1},xTitle:{label:"X axis label",order:2,section:"Format",type:"string",placeholder:"Enter x axis label",hidden:!1},customSpacing:{order:8,section:"Format",type:"sentence_maker",words:[{type:"separator",text:" "}],hidden:!1},customLabel:{order:9,section:"Format",type:"sentence_maker",words:[{type:"separator",text:"Custom configuration:"}],hidden:!1},dataLabels:{label:"Enable data labels",order:10,section:"Format",type:"boolean",default:!1,hidden:!1},horizontal:{label:"Plot graph horizontally",order:11,section:"Format",type:"boolean",default:!0,hidden:!1},endingShape:{label:"Ending bar shape",order:12,section:"Format",type:"string",display:"select",values:[{Rounded:"rounded"},{Flat:"flat"}],default:"rounded",hidden:!1},doNotTruncate:{label:"Don't Truncate data",order:14,section:"Format",type:"boolean",default:!1,hidden:!1}},create:function(e,t){this._custom="something",e.innerHTML='\n            <style>\n            @import url(\'https://fonts.googleapis.com/css?family=Roboto:300,400,500&display=swap\');\n            * { font-family: \'Roboto\' !important; }\n            </style>\n            <div class="row">\n                <div class="col-md-6">\n                    <div class="main-card mb-3 card">\n                        <div class="card-body">\n                            <div id="chart-apex-column"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            ',this._container=d3.select(e).append("div").attr("class","container").style("position","absolute").style("top","0").style("left","0")},updateAsync:function(e,t,n,i,a,o){d3.select("#chart-apex-column").selectAll("*").remove();var l=e,s=!1,r=!1,d=!1;0!=i.fields.pivots.length&&(s=!0,0==i.fields.dimension_like.length?(r=!0,i.fields._dimension_like=i.fields.dimension_like,i.fields.dimension_like=i.fields.pivots):d=!0);var c=!0;!function(){console.log("Iterating through the ifPercentQuery function");for(var e=0;e<i.fields.measure_like.length;e++)if(!l[0][i.fields.measure_like[e].name].rendered.includes("%")){console.log("All percents is false",l[0][i.fields.measure_like[e].name].rendered),c=!1;break}console.log("\n\nRecreating the data:"),c&&l.forEach(function(e){for(var t=0;t<i.fields.measure_like.length;t++){var n=e[i.fields.measure_like[t].name].value,a=100*n,o=a.toFixed(1);e[i.fields.measure_like[t].name].original=n,e[i.fields.measure_like[t].name].value=o,console.log("New data values:",e)}})}();var u="Horizontal";n.chooseTheme&&(u=n.chooseTheme);var h=!1,m=!1,p=!1,f="rounded",v=" ";n.showTitle||(n.showTitle=!1);var k=" ",g=" ",y=!1;if("Horizontal"!=u&&"Vertical"!=u||("horizontalOrVertical"!=this._custom&&(this._custom="horizontalOrVertical",this.options.customSpacing.hidden=!0,this.options.customLabel.hidden=!0,this.options.dataLabels.hidden=!0,this.options.horizontal.hidden=!0,this.options.endingShape.hidden=!0,this.options.doNotTruncate.hidden=!0,h=!0),"Horizontal"==u&&(p=!0),"Vertical"==u&&(p=!1)),"Custom"==u&&("Custom"!=this._custom&&(this._custom="Custom",this.options.customSpacing.hidden=!1,this.options.customLabel.hidden=!1,this.options.dataLabels.hidden=!1,this.options.horizontal.hidden=!1,this.options.endingShape.hidden=!1,this.options.doNotTruncate.hidden=!1,h=!0),n.dataLabels&&(m=n.dataLabels),n.endingShape&&(f=n.endingShape),n.horizontal&&(p=n.horizontal),n.doNotTruncate&&(y=n.doNotTruncate)),h&&this.trigger("registerOptions",this.options),""!=n.title&&(v=n.title),""!=n.yTitle&&(k=n.yTitle),""!=n.xTitle&&(g=n.xTitle),!y)for(var b=function(e){var t=!1;l.forEach(function(n){n[i.fields.measure_like[e].name].value>100&&(t=!0)}),t&&l.forEach(function(t){t[i.fields.measure_like[e].name].original=t[i.fields.measure_like[e].name].value,t[i.fields.measure_like[e].name].value=Math.trunc(t[i.fields.measure_like[e].name].value)})},_=0;_<i.fields.measure_like.length;_++)b(_);var x=[],F=[];if(s){if(r&&(i.pivots.forEach(function(e){var t=void 0;e.metadata[i.fields.pivots[0].name].links&&(t=e.metadata[i.fields.pivots[0].name].links),e.metadata[i.fields.pivots[0].name].rendered?null!=e.metadata[i.fields.pivots[0].name].rendered&&x.push({name:e.metadata[i.fields.pivots[0].name].rendered,links:t}):x.push({name:e.key,links:t})}),i.fields.measure_like.forEach(function(e,t){for(var n=[],a=[],o=0;o<i.pivots.length;o++){var s=i.pivots[o].key,r=0;a.push(l[0][e.name][s].links),null!=l[0][e.name][s].value&&(r=l[0][e.name][s].value),n.push(r)}var d=e.label;e.label_short&&(d=e.label_short);var c={name:d,className:d.replace(/ /g,"-"),data:n,links:a};F.push(c)})),d){l.forEach(function(e){var t=e[i.fields.dimension_like[0].name].links;e[i.fields.dimension_like[0].name].rendered?x.push({name:e[i.fields.dimension_like[0].name].rendered,links:t}):x.push({name:e[i.fields.dimension_like[0].name].value,links:t})});for(var E=0;E<i.pivots.length;E++){var C=i.pivots[E].data[i.fields.pivots[0].name],w={name:C,className:C.replace(/ /g,"-"),data:[],links:[]};F.push(w)}l.forEach(function(e){for(var t=0;t<i.pivots.length;t++)F[t].links.push(e[i.fields.measure_like[0].name][i.pivots[t].key].links)}),l.forEach(function(e){for(var t=0;t<i.pivots.length;t++){var n=0;null!=e[i.fields.measure_like[0].name][i.pivots[t].key].value&&(n=e[i.fields.measure_like[0].name][i.pivots[t].key].value),F[t].data.push(n)}})}}else{for(_=0;_<i.fields.measure_like.length;_++){var A=i.fields.measure_like[_].label;i.fields.measure_like[_].label_short&&(A=i.fields.measure_like[_].label_short);var T={name:A,className:A.replace(/ /g,"-"),data:[],links:[]};F.push(T)}l.forEach(function(e){var t=e[i.fields.dimension_like[0].name].value,n=e[i.fields.dimension_like[0].name].links;x.push({name:t,links:n})}),l.forEach(function(e,t){for(var n=0;n<i.fields.measure_like.length;n++){var a=0,o=e[i.fields.measure_like[n].name].links;null!=e[i.fields.measure_like[n].name].value&&(a=e[i.fields.measure_like[n].name].value),F[n].data.push(a),F[n].links.push(o)}})}var z=[];x.forEach(function(e){return z.push(e.name)});var D=window.innerHeight-45,L="55";n.columnWidth&&(L=n.columnWidth),L.toString();var S={chart:{height:D,type:"bar"},colors:["#009DE9","#3EC173","#38E883","#4A4AFF","#163796","#5CF3FF","#F9BE3D","#E2FF6E","#ACEA49","#A53057","#AC7EB7","#5C3BC3","#5278CE","#A1EDFF","#05CE5A","#4A8C04","#3ABBCF","#ECE428","#E53057","#FF8571","#F9DCA0","#8FFFC7","#DFA1FF","#9C5CF7","#0D6D6D","#35A8DB","#92FFFF","#A5C0FF","#FFB0B0","#931655"],plotOptions:{bar:{horizontal:p,endingShape:f,columnWidth:L+="%"}},dataLabels:{enabled:m,style:{fontSize:"12px",colors:["#fff"]}},stroke:{show:!0,width:2,colors:["transparent"]},series:F,xaxis:{categories:z,title:{text:g},labels:{formatter:function(e){return c&&p?e+"%":e}}},yaxis:{title:{text:k},labels:{formatter:function(e){return c&&!p?e+"%":e}}},fill:{opacity:1},tooltip:{y:{formatter:function(e){return c?e+"%":e}}},legend:{position:"bottom",horizontalAlign:"center"}};1==n.showTitle&&(S.title={text:v}),window.Apex={dataLabels:{enabled:!1},stroke:{width:2}};var B=new ApexCharts(document.querySelector("#chart-apex-column"),S);document.getElementById("chart-apex-column")&&B.render(),d3.select(".container").selectAll("*").remove();var N=document.getElementsByClassName("apexcharts-xaxis-texts-g");p&&(N=document.getElementsByClassName("apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g"));var j,H=N[0].children,O=[];x.forEach(function(e,t){null==e.links&&(e.links=[]);for(var n=0;n<F.length;n++)if(void 0!==F[n].links[t])for(var i=0;i<F[n].links[t].length;i++)F[n].links[t][i].type_label||(F[n].links[t][i].type_label="Drill into ".concat(F[n].name)),e.links.push(F[n].links[t][i])});for(var V=0;V<x.length;V++){var R=(j=H[V].getBoundingClientRect()).width,M=j.height,P={index:V,id:"_".concat(H[V].id),originalId:H[V].id,coordinates:{x:j.x,y:j.y,width:R,height:M,top:j.top,left:j.left,bottom:j.bottom,right:j.right},xaxis:x[V].name,links:x[V].links,element:H[V]};O.push(P)}var I=d3.select(".container").append("div").attr("class","dimensions").selectAll(".dimension").data(O),W=I.enter().append("span");I.merge(W).attr("class","dimension").attr("id",function(e){return e.id}).style("width",function(e){return"".concat(e.coordinates.width,"px")}).style("height",function(e){return"".concat(e.coordinates.height,"px")}).style("position","absolute").style("top",function(e){return"".concat(e.coordinates.top,"px")}).style("left",function(e){return"".concat(e.coordinates.left,"px")}).style("background-color","transparent").style("opacity","0").style("z-index","4").on("click",function(e){return t=e.links,n=d3.event,void LookerCharts.Utils.openDrillMenu({links:t,event:n});var t,n}),o()}})}})});
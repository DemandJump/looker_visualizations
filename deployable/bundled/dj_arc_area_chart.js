!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["./dj_arc_area_chart"]=t():e["./dj_arc_area_chart"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function a(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=473)}({473:function(e,t){looker.plugins.visualizations.add({id:"dj_arc_area_chart",label:"Demandjump area chart",options:{themes:{label:"Choose a theme",order:1,section:"Format",type:"string",display:"select",values:[{Classic:"classic"},{Smooth:"smooth"},{Step:"stepline"},{Custom:"custom"}],default:"area",hidden:!1},title:{label:"Title of chart",order:3,section:"Format",type:"string",placeholder:"Enter chart title here",hidden:!1},xTitle:{label:"X axis label",order:1.9,section:"Format",type:"string",placeholder:"Enter chart title here",hidden:!1},yTitle:{label:"Y axis label",order:1.94,section:"Format",type:"string",placeholder:"Enter chart title here",hidden:!1},showTitle:{label:"Show title",order:4,section:"Format",type:"boolean",default:!0,hidden:!1},label:{label:"Label by title",order:2,section:"Format",type:"string",placeholder:"Enter the label of the visual",hidden:!1},stack:{label:"Series positioning",order:5,section:"Format",type:"string",display:"radio",values:[{Overlay:"overlay"},{Stack:"stack"}],default:"overlay",hidden:!1},sideYaxis:{label:"Set y axis on the right",order:6,section:"Format",type:"boolean",default:!1,hidden:!1},customSpacing:{order:8,section:"Format",type:"sentence_maker",words:[{type:"separator",text:" "}],hidden:!1},customLabel:{order:9,section:"Format",type:"sentence_maker",words:[{type:"separator",text:"Custom configuration:"}],hidden:!1},curve:{label:"Line behavior",order:10,section:"Format",type:"string",display:"select",values:[{Straight:"straight"},{Smooth:"smooth"},{Step:"stepline"}],default:"straight",hidden:!1},alignLegend:{label:"Align legend",order:11,section:"Format",type:"string",display:"select",values:[{Left:"left"},{Center:"center"},{Right:"right"}],default:"center",hidden:!1},fill:{label:"Gradient type",order:12,section:"Format",type:"string",display:"select",values:[{Gradient:"gradient"},{Solid:"solid"},{Pattern:"pattern"}],default:"gradient",hidden:!1},doNotTruncate:{label:"Don't Truncate data",order:13,section:"Format",type:"boolean",default:!1,hidden:!1},allArea:{label:"All area chart types",order:40,section:"Type of Chart",type:"boolean",default:!0,hidden:!1},allColumn:{label:"All column chart types",order:41,section:"Type of Chart",type:"boolean",default:!1,hidden:!1},allLine:{label:"All line chart types",order:42,section:"Type of Chart",type:"boolean",default:!1,hidden:!1}},create:function(e,t){this._custom="",e.innerHTML='\n            <style>\n            @import url(\'https://fonts.googleapis.com/css?family=Roboto:100, 300,400,500&display=swap\');\n            * { font-family: \'Roboto\' !important; }\n            </style>\n            <div class="row">\n                <div class="col-md-6">\n                    <div class="main-card mb-3 card">\n                        <div class="card-body">\n                            <div id="chart-apex-area">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            ',this._container=d3.select(e).append("div").attr("class","container").style("position","absolute").style("top","0").style("left","0")},updateAsync:function(e,t,a,i,n,l){d3.select("#chart-apex-area").selectAll("*").remove();var s=e,o=!1,r=!1,d=!1;0!=i.fields.pivots.length&&(o=!0,0==i.fields.dimension_like.length?(r=!0,i.fields._dimension_like=i.fields.dimension_like,i.fields.dimension_like=i.fields.pivots):d=!0);var c=!0;!function(){console.log("Iterating through the ifPercentQuery function");for(var e=0;e<i.fields.measure_like.length;e++){if(!s[0][i.fields.measure_like[e].name].rendered.includes("%")){console.log("All percents is false",s[0][i.fields.measure_like[e].name].rendered),c=!1;break}console.log("Found percent value",s[0][i.fields.measure_like[e].name].rendered)}console.log("\n\nRecreating the data:"),c&&(console.log("iterating through the data"),s.forEach(function(e){for(var t=0;t<i.fields.measure_like.length;t++){var a=e[i.fields.measure_like[t].name].value,n=100*a,l=n.toFixed(1);e[i.fields.measure_like[t].name].original=a,e[i.fields.measure_like[t].name].value=l,console.log("New data values:",e)}}))}();var u="area";a.themes&&(u=a.themes);var h=!1,f=i.fields.dimension_like[0].label,m=" ",p=" ",v=" ",g="straight",y="overlay",k=!1,b=!1,_="center",x=!1,F="gradient",C=window.innerHeight-45;if(a.label&&(m=a.label),a.title&&""!=a.title&&(f=a.title),a.showTitle||(a.showTitle=!1),"classic"!=u&&"smooth"!=u&&"stepline"!=u||("classic"!=this._custom&&(this._custom="classic",this.options.customSpacing.hidden=!0,this.options.customLabel.hidden=!0,this.options.curve.hidden=!0,this.options.alignLegend.hidden=!0,this.options.doNotTruncate.hidden=!0,this.options.fill.hidden=!0,h=!0),"classic"==u&&(g="straight"),"smooth"==u&&(g="smooth"),"stepline"==u&&(g="stepline")),"custom"==u&&("custom"!=this._custom&&(this._custom="custom",this.options.customSpacing.hidden=!1,this.options.customLabel.hidden=!1,this.options.curve.hidden=!1,this.options.alignLegend.hidden=!1,this.options.doNotTruncate.hidden=!1,this.options.fill.hidden=!1,h=!0),a.curve&&(g=a.curve),a.alignLegend&&(_=a.alignLegend),a.formatDates&&a.formatDates,a.doNotTruncate&&(x=a.doNotTruncate),a.fill&&(F=a.fill)),a.stack&&("overlay"==(y=a.stack)&&(k=!1),"stack"==y&&(k=!0)),""!=a.xTitle&&(p=a.xTitle),""!=a.yTitle&&(v=a.yTitle),a.sideYaxis&&(b=a.sideYaxis),!x)for(var E=function(e){var t=!1;s.forEach(function(a){a[i.fields.measure_like[e].name].value>100&&(t=!0)}),t&&s.forEach(function(t){t[i.fields.measure_like[e].name].original=t[i.fields.measure_like[e].name].value,t[i.fields.measure_like[e].name].value=Math.trunc(t[i.fields.measure_like[e].name].value)})},A=0;A<i.fields.measure_like.length;A++)E(A);var T=[],w=[];if(o){if(r){i.pivots.forEach(function(e){var t=[];e.metadata[i.fields.pivots[0].name].links&&(t=e.metadata[i.fields.pivots[0].name].links),e.metadata[i.fields.pivots[0].name].rendered?null!=e.metadata[i.fields.pivots[0].name].rendered&&T.push({name:e.metadata[i.fields.pivots[0].name].rendered,links:t}):T.push({name:e.key,links:t})});i.fields.measure_like.forEach(function(e,t){for(var a=[],n=[],l=0;l<i.pivots.length;l++){var o=i.pivots[l].key,r=0;n.push(s[0][e.name][o].links),null!=s[0][e.name][o].value&&(r=s[0][e.name][o].value),a.push(r)}var d=e.label;e.label_short&&(d=e.label_short);var c={name:d,className:d.replace(/ /g,"-"),data:a,links:n};w.push(c)})}if(d){s.forEach(function(e){var t=e[i.fields.dimension_like[0].name].links;e[i.fields.dimension_like[0].name].rendered?T.push({name:e[i.fields.dimension_like[0].name].rendered,links:t}):T.push({name:e[i.fields.dimension_like[0].name].value,links:t})});for(var L=0;L<i.pivots.length;L++){var D=i.pivots[L].data[i.fields.pivots[0].name],S={name:D,className:D.replace(/ /g,"-"),data:[],links:[]};w.push(S)}s.forEach(function(e){for(var t=0;t<i.pivots.length;t++)w[t].links.push(e[i.fields.measure_like[0].name][i.pivots[t].key].links)}),s.forEach(function(e){for(var t=0;t<i.pivots.length;t++){var a=0;null!=e[i.fields.measure_like[0].name][i.pivots[t].key].value&&(a=e[i.fields.measure_like[0].name][i.pivots[t].key].value),w[t].data.push(a)}})}}else{for(A=0;A<i.fields.measure_like.length;A++){var B=i.fields.measure_like[A].label;i.fields.measure_like[A].label_short&&(B=i.fields.measure_like[A].label_short);var N={name:B,className:B.replace(/ /g,"-"),data:[],links:[]};w.push(N)}s.forEach(function(e){var t=e[i.fields.dimension_like[0].name].value,a=e[i.fields.dimension_like[0].name].links;null!=a&&null!=a||(a=[]),T.push({name:t,links:a})}),s.forEach(function(e,t){for(var a=0;a<i.fields.measure_like.length;a++){var n=e[i.fields.measure_like[a].name].links;null!=n&&null!=n||(n=[]);var l=void 0;l=e[i.fields.dimension_like[0].name].rendered?e[i.fields.dimension_like[0].name].rendered:e[i.fields.dimension_like[0].name].value;var s=0;null!=e[i.fields.measure_like[a].name].value&&(s=e[i.fields.measure_like[a].name].value);var o={x:l,y:s};w[a].data.push(o),w[a].links.push(n)}})}var j=this.options;!function(){w.forEach(function(e,t){var i="series_".concat(t);if(j[i]){"".concat(e.name," series chart type")!=j[i].label&&(j[i].label="".concat(e.name," series chart type"),h=!0);var n="area";a.allArea?n="area":a.allColumn?n="column":a.allLine?n="line":a[i]&&(n=a[i]),e.type=n}else h=!0,j[i]={label:"Chart type: ".concat(e.name),order:t,section:"Type of Chart",type:"string",display:"select",values:[{Area:"area"},{Column:"column"},{Line:"line"}],default:"area",hidden:!1}});var e=w.length,t=!0;for(;t;){var i="series_".concat(e);j[i]?(h=!0,e++,delete j[i]):t=!1}}(),this.options=j,h&&this.trigger("registerOptions",this.options);var z=[];T.forEach(function(e){return z.push(e.name)});var O={chart:{height:C,type:"area",stacked:k,zoom:{enabled:!0}},series:w,labels:z,colors:["#009DE9","#3EC173","#38E883","#4A4AFF","#163796","#5CF3FF","#F9BE3D","#E2FF6E","#ACEA49","#A53057","#AC7EB7","#5C3BC3","#5278CE","#A1EDFF","#05CE5A","#4A8C04","#3ABBCF","#ECE428","#E53057","#FF8571","#F9DCA0","#8FFFC7","#DFA1FF","#9C5CF7","#0D6D6D","#35A8DB","#92FFFF","#A5C0FF","#FFB0B0","#931655"],dataLabels:{enabled:!1,offsetX:-4,style:{fontSize:"12px",colors:["#fff"]}},stroke:{curve:g},fill:{type:F},subtitle:{text:m,align:"left"},xaxis:{type:"category",title:{text:p}},yaxis:{title:{text:v},opposite:b,labels:{formatter:function(e){return c?e+"%":e}}},tooltip:{y:{formatter:function(e){return c?e+"%":e}}},legend:{horizontalAlign:_}};a.showTitle&&(O.title={text:f,align:"left"}),window.Apex={dataLabels:{enabled:!1},stroke:{width:2}};var R=new ApexCharts(document.querySelector("#chart-apex-area"),O);document.getElementById("chart-apex-area")&&R.render(),d3.select(".container").selectAll("*").remove();var M,P=document.getElementsByClassName("apexcharts-xaxis-texts-g")[0].children,Y=[];T.forEach(function(e,t){null==e.links&&(e.links=[]);for(var a=0;a<w.length;a++)if(void 0!==w[a].links[t])for(var i=0;i<w[a].links[t].length;i++)w[a].links[t][i].type_label||(w[a].links[t][i].type_label="Drill into ".concat(w[a].name)),e.links.push(w[a].links[t][i])});for(var I=0;I<T.length;I++){null==T[I].links&&(T[I].links=[]),M=P[I].getBoundingClientRect();var G={index:I,id:"_".concat(P[I].id),originalId:P[I].id,width:M.width,height:M.height,top:M.top,left:M.left,bottom:M.bottom,right:M.right,xaxis:T[I].name,links:T[I].links,element:P[I]};P[I].attributes.transform&&(G.transform=P[I].attributes.transform.value),Y.push(G)}var H=d3.select(".container").append("div").attr("class","dimensions").selectAll(".dimension").data(Y),X=H.enter().append("span");H.merge(X).attr("class","dimension").attr("id",function(e){return e.id}).style("width",function(e){return"".concat(e.width,"px")}).style("height",function(e){return"".concat(e.height,"px")}).style("position","absolute").style("left",function(e){return"".concat(e.left,"px")}).style("top",function(e){return"".concat(e.top,"px")}).style("background-color","transparent").style("opacity","0").style("z-index","4").on("click",function(e){return t=e.links,a=d3.event,void LookerCharts.Utils.openDrillMenu({links:t,event:a});var t,a}),l()}})}})});
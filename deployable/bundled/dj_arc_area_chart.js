!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["./dj_arc_area_chart"]=t():e["./dj_arc_area_chart"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function i(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=473)}({473:function(e,t){looker.plugins.visualizations.add({id:"dj_arc_area_chart",label:"Demandjump area chart",options:{themes:{label:"Choose a theme",order:1,section:"Format",type:"string",display:"select",values:[{Classic:"classic"},{Smooth:"smooth"},{Step:"stepline"},{Custom:"custom"}],default:"area",hidden:!1},title:{label:"Title of chart",order:3,section:"Format",type:"string",placeholder:"Enter chart title here",hidden:!1},xTitle:{label:"X axis label",order:1.9,section:"Format",type:"string",placeholder:"Enter chart title here",hidden:!1},yTitle:{label:"Y axis label",order:1.94,section:"Format",type:"string",placeholder:"Enter chart title here",hidden:!1},showTitle:{label:"Show title",order:4,section:"Format",type:"boolean",default:!0,hidden:!1},label:{label:"Label by title",order:2,section:"Format",type:"string",placeholder:"Enter the label of the visual",hidden:!1},stack:{label:"Series positioning",order:5,section:"Format",type:"string",display:"radio",values:[{Overlay:"overlay"},{Stack:"stack"}],default:"overlay",hidden:!1},sideYaxis:{label:"Set y axis on the right",order:6,section:"Format",type:"boolean",default:!1,hidden:!1},customSpacing:{order:8,section:"Format",type:"sentence_maker",words:[{type:"separator",text:" "}],hidden:!1},customLabel:{order:9,section:"Format",type:"sentence_maker",words:[{type:"separator",text:"Custom configuration:"}],hidden:!1},curve:{label:"Line behavior",order:10,section:"Format",type:"string",display:"select",values:[{Straight:"straight"},{Smooth:"smooth"},{Step:"stepline"}],default:"straight",hidden:!1},alignLegend:{label:"Align legend",order:11,section:"Format",type:"string",display:"select",values:[{Left:"left"},{Center:"center"},{Right:"right"}],default:"center",hidden:!1},fill:{label:"Gradient type",order:12,section:"Format",type:"string",display:"select",values:[{Gradient:"gradient"},{Solid:"solid"},{Pattern:"pattern"}],default:"gradient",hidden:!1},doNotTruncate:{label:"Don't Truncate data",order:13,section:"Format",type:"boolean",default:!1,hidden:!1},allArea:{label:"All area chart types",order:40,section:"Type of Chart",type:"boolean",default:!0,hidden:!1},allColumn:{label:"All column chart types",order:41,section:"Type of Chart",type:"boolean",default:!1,hidden:!1},allLine:{label:"All line chart types",order:42,section:"Type of Chart",type:"boolean",default:!1,hidden:!1}},create:function(e,t){this._custom="",e.innerHTML='\n            <style>\n            @import url(\'https://fonts.googleapis.com/css?family=Roboto:100, 300,400,500&display=swap\');\n            * { font-family: \'Roboto\' !important; }\n            </style>\n            <div class="row">\n                <div class="col-md-6">\n                    <div class="main-card mb-3 card">\n                        <div class="card-body">\n                            <div id="chart-apex-area">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            ',this._container=d3.select(e).append("div").attr("class","container").style("position","absolute").style("top","0").style("left","0")},updateAsync:function(e,t,i,a,n,l){d3.select("#chart-apex-area").selectAll("*").remove();var s=e,r=!1,o=!1,d=!1;0!=a.fields.pivots.length&&(r=!0,0==a.fields.dimension_like.length?(o=!0,a.fields._dimension_like=a.fields.dimension_like,a.fields.dimension_like=a.fields.pivots):d=!0);var c=!0;!function(){if(r){if(o&&(a.fields.measure_like.forEach(function(e){for(var t=0;t<a.pivots.length;t++){if(!s[0][e.name][a.pivots[t].key].rendered)return void(c=!1);if(!s[0][e.name][a.pivots[t].key].rendered.includes("%"))return void(c=!1)}}),c&&a.fields.measure_like.forEach(function(e){for(var t=0;t<a.pivots.length;t++){var i=s[0][e.name][a.pivots[t].key].value,n=100*i,l=n.toFixed(1);s[0][e.name][a.pivots[t].key].original=i,s[0][e.name][a.pivots[t].key].value=l}})),d){for(var e=function(e){a.fields.measure_like.forEach(function(t){s[0][t.name][a.pivots[e].key].rendered&&s[0][t.name][a.pivots[e].key].rendered.includes("%")||(c=!1)})},t=0;t<a.pivots.length;t++)e(t);c&&s.forEach(function(e){for(var t=0;t<a.pivots.length;t++)for(var i=0;i<a.fields.measure_like.length;i++){var n=e[a.fields.measure_like[i].name][a.pivots[t].key].value,l=100*n,s=l.toFixed(1);e[a.fields.measure_like[i].name][a.pivots[t].key].original=n,e[a.fields.measure_like[i].name][a.pibots[t].key].value=s}})}}else{for(var i=0;i<a.fields.measure_like.length;i++){if(!s[0][a.fields.measure_like[i].name].rendered)return void(c=!1);if(!s[0][a.fields.measure_like[i].name].rendered.includes("%"))return void(c=!1)}c&&s.forEach(function(e){for(var t=0;t<a.fields.measure_like.length;t++){var i=e[a.fields.measure_like[t].name].value,n=100*i,l=n.toFixed(1);e[a.fields.measure_like[t].name].original=i,e[a.fields.measure_like[t].name].value=l}})}}();var u="area";i.themes&&(u=i.themes);var f=!1,m=a.fields.dimension_like[0].label,h=" ",p=" ",v=" ",k="straight",y="overlay",g=!1,_=!1,b="center",x=!1,F="gradient",E=window.innerHeight-45;if(i.label&&(h=i.label),i.title&&""!=i.title&&(m=i.title),i.showTitle||(i.showTitle=!1),"classic"!=u&&"smooth"!=u&&"stepline"!=u||("classic"!=this._custom&&(this._custom="classic",this.options.customSpacing.hidden=!0,this.options.customLabel.hidden=!0,this.options.curve.hidden=!0,this.options.alignLegend.hidden=!0,this.options.doNotTruncate.hidden=!0,this.options.fill.hidden=!0,f=!0),"classic"==u&&(k="straight"),"smooth"==u&&(k="smooth"),"stepline"==u&&(k="stepline")),"custom"==u&&("custom"!=this._custom&&(this._custom="custom",this.options.customSpacing.hidden=!1,this.options.customLabel.hidden=!1,this.options.curve.hidden=!1,this.options.alignLegend.hidden=!1,this.options.doNotTruncate.hidden=!1,this.options.fill.hidden=!1,f=!0),i.curve&&(k=i.curve),i.alignLegend&&(b=i.alignLegend),i.formatDates&&i.formatDates,i.doNotTruncate&&(x=i.doNotTruncate),i.fill&&(F=i.fill)),i.stack&&("overlay"==(y=i.stack)&&(g=!1),"stack"==y&&(g=!0)),""!=i.xTitle&&(p=i.xTitle),""!=i.yTitle&&(v=i.yTitle),i.sideYaxis&&(_=i.sideYaxis),!x)for(var C=function(e){var t=!1;s.forEach(function(i){i[a.fields.measure_like[e].name].value>100&&(t=!0)}),t&&s.forEach(function(t){t[a.fields.measure_like[e].name].original=t[a.fields.measure_like[e].name].value,t[a.fields.measure_like[e].name].value=Math.trunc(t[a.fields.measure_like[e].name].value)})},A=0;A<a.fields.measure_like.length;A++)C(A);var T=[],w=[];if(r){if(o){a.pivots.forEach(function(e){var t=[];e.metadata[a.fields.pivots[0].name].links&&(t=e.metadata[a.fields.pivots[0].name].links),e.metadata[a.fields.pivots[0].name].rendered?null!=e.metadata[a.fields.pivots[0].name].rendered&&T.push({name:e.metadata[a.fields.pivots[0].name].rendered,links:t}):T.push({name:e.key,links:t})});a.fields.measure_like.forEach(function(e,t){for(var i=[],n=[],l=0;l<a.pivots.length;l++){var r=a.pivots[l].key,o=0;n.push(s[0][e.name][r].links),null!=s[0][e.name][r].value&&(o=s[0][e.name][r].value),i.push(o)}var d=e.label;e.label_short&&(d=e.label_short);var c={name:d,className:d.replace(/ /g,"-"),data:i,links:n};w.push(c)})}if(d){s.forEach(function(e){var t=e[a.fields.dimension_like[0].name].links;e[a.fields.dimension_like[0].name].rendered?T.push({name:e[a.fields.dimension_like[0].name].rendered,links:t}):T.push({name:e[a.fields.dimension_like[0].name].value,links:t})});for(var L=0;L<a.pivots.length;L++){var D=a.pivots[L].data[a.fields.pivots[0].name],S={name:D,className:D.replace(/ /g,"-"),data:[],links:[]};w.push(S)}s.forEach(function(e){for(var t=0;t<a.pivots.length;t++)w[t].links.push(e[a.fields.measure_like[0].name][a.pivots[t].key].links)}),s.forEach(function(e){for(var t=0;t<a.pivots.length;t++){var i=0;null!=e[a.fields.measure_like[0].name][a.pivots[t].key].value&&(i=e[a.fields.measure_like[0].name][a.pivots[t].key].value),w[t].data.push(i)}})}}else{for(A=0;A<a.fields.measure_like.length;A++){var B=a.fields.measure_like[A].label;a.fields.measure_like[A].label_short&&(B=a.fields.measure_like[A].label_short);var j={name:B,className:B.replace(/ /g,"-"),data:[],links:[]};w.push(j)}s.forEach(function(e){var t=e[a.fields.dimension_like[0].name].value,i=e[a.fields.dimension_like[0].name].links;null!=i&&null!=i||(i=[]),T.push({name:t,links:i})}),s.forEach(function(e,t){for(var i=0;i<a.fields.measure_like.length;i++){var n=e[a.fields.measure_like[i].name].links;null!=n&&null!=n||(n=[]);var l=void 0;l=e[a.fields.dimension_like[0].name].rendered?e[a.fields.dimension_like[0].name].rendered:e[a.fields.dimension_like[0].name].value;var s=0;null!=e[a.fields.measure_like[i].name].value&&(s=e[a.fields.measure_like[i].name].value);var r={x:l,y:s};w[i].data.push(r),w[i].links.push(n)}})}var N=this.options;!function(){w.forEach(function(e,t){var a="series_".concat(t);if(N[a]){"".concat(e.name," series chart type")!=N[a].label&&(N[a].label="".concat(e.name," series chart type"),f=!0);var n="area";i.allArea?n="area":i.allColumn?n="column":i.allLine?n="line":i[a]&&(n=i[a]),e.type=n}else f=!0,N[a]={label:"Chart type: ".concat(e.name),order:t,section:"Type of Chart",type:"string",display:"select",values:[{Area:"area"},{Column:"column"},{Line:"line"}],default:"area",hidden:!1}});var e=w.length,t=!0;for(;t;){var a="series_".concat(e);N[a]?(f=!0,e++,delete N[a]):t=!1}}(),this.options=N,f&&this.trigger("registerOptions",this.options);var z=[];T.forEach(function(e){return z.push(e.name)});var O={chart:{height:E,type:"area",stacked:g,zoom:{enabled:!0}},series:w,labels:z,colors:["#009DE9","#3EC173","#38E883","#4A4AFF","#163796","#5CF3FF","#F9BE3D","#E2FF6E","#ACEA49","#A53057","#AC7EB7","#5C3BC3","#5278CE","#A1EDFF","#05CE5A","#4A8C04","#3ABBCF","#ECE428","#E53057","#FF8571","#F9DCA0","#8FFFC7","#DFA1FF","#9C5CF7","#0D6D6D","#35A8DB","#92FFFF","#A5C0FF","#FFB0B0","#931655"],dataLabels:{enabled:!1,offsetX:-4,style:{fontSize:"12px",colors:["#fff"]}},stroke:{curve:k},fill:{type:F},subtitle:{text:h,align:"left"},xaxis:{type:"category",title:{text:p}},yaxis:{title:{text:v},opposite:_,labels:{formatter:function(e){return c?e+"%":e}}},tooltip:{y:{formatter:function(e){return c?e+"%":e}}},legend:{horizontalAlign:b}};i.showTitle&&(O.title={text:m,align:"left"}),window.Apex={dataLabels:{enabled:!1},stroke:{width:2}};var M=new ApexCharts(document.querySelector("#chart-apex-area"),O);document.getElementById("chart-apex-area")&&M.render(),d3.select(".container").selectAll("*").remove();var R,Y=document.getElementsByClassName("apexcharts-xaxis-texts-g")[0].children,P=[];T.forEach(function(e,t){null==e.links&&(e.links=[]);for(var i=0;i<w.length;i++)if(void 0!==w[i].links[t])for(var a=0;a<w[i].links[t].length;a++)w[i].links[t][a].type_label||(w[i].links[t][a].type_label="Drill into ".concat(w[i].name)),e.links.push(w[i].links[t][a])});for(var G=0;G<T.length;G++){null==T[G].links&&(T[G].links=[]),R=Y[G].getBoundingClientRect();var H={index:G,id:"_".concat(Y[G].id),originalId:Y[G].id,width:R.width,height:R.height,top:R.top,left:R.left,bottom:R.bottom,right:R.right,xaxis:T[G].name,links:T[G].links,element:Y[G]};Y[G].attributes.transform&&(H.transform=Y[G].attributes.transform.value),P.push(H)}var I=d3.select(".container").append("div").attr("class","dimensions").selectAll(".dimension").data(P),X=I.enter().append("span");I.merge(X).attr("class","dimension").attr("id",function(e){return e.id}).style("width",function(e){return"".concat(e.width,"px")}).style("height",function(e){return"".concat(e.height,"px")}).style("position","absolute").style("left",function(e){return"".concat(e.left,"px")}).style("top",function(e){return"".concat(e.top,"px")}).style("background-color","transparent").style("opacity","0").style("z-index","4").on("click",function(e){return t=e.links,i=d3.event,void LookerCharts.Utils.openDrillMenu({links:t,event:i});var t,i}),l()}})}})});